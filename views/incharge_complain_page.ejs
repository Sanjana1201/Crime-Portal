<%- include("partials/header") -%>

</style>

</head>

<body style="background-image: url(../images/complainer_page.jpg);">

<section id="title">
<div class="container-fluid" style="padding-left: 0px;padding-right: 0px;">

<!-- Nav Bar -->
<nav class="navbar navbar-expand-lg navbar-light" style="background-color: #fff;padding: 0;">
 <a class="navbar-brand" href="">
 <img src="../images/home_page_logo.png" alt="logo" width="180px" class="img-fluid">
 </a>
 <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation" style="margin-right: 15px;">
 <span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarToggleExternalContent">
<ul class="navbar-nav ms-auto nav-pills">
 <li class="nav-item">
     <a class="nav-link" href="/">Home</a>
 </li>
 <li class="nav-item">
   <a class="nav-link active" href="#">View Complaints</a>
 </li>
 <li class="nav-item">
   <a class="nav-link" href="incharge_view_police">Police Officers</a>
 </li>
 <li class="nav-item">
   <a class="nav-link" href="logout">Logout &nbsp <i class="fa fa-sign-out" aria-hidden="true"></i></a>
 </li>
</ul>
</div>
</nav>

</div>
</section>


<div style="padding:50px 50px 0 50px;">
    <form action="/<%= currentState %>/incharge_complain_details1" method="post">
      <div class="form-group container-fluid input-group mb-3">
        <input type="text" name="cid" placeholder="Search for detailed information and current status by Complaint Id" id="ciid" required class="form-control" autocomplete="off">
        <button type="submit" name="button" class="btn btn-primary btn-sm" style="float:right;"><i class="fas fa-search"></i></button>
      </div>
      </form>
</div>

<div style="padding:20px 50px 50px 50px;">
  <table class="table table-bordered">
   <thead class="thead-dark" style="background-color: black; color: white;">
     <tr>
      <th scope="col">Complaint Id</th>
      <th scope="col">Type of Crime</th>
      <th scope="col">Date of Crime</th>
      <th scope="col">Location of Crime</th>
      <th scope="col">Complaint Status</th>
      <th scope="col">Police ID</th>
    </tr>
  </thead>

<tbody style="background-color: white; color: black;">
  <%  stateComplaint.forEach(function(userComplain){  %>
    <%   const requestedState = userComplain.state; %>
    <%    const requestedId = userComplain.policeId; %>
     <%    if(currentState === requestedState){  %>
  <tr>

    <td><%= userComplain._id %></td>
    <td><%= userComplain.type %></td>
    <td><%= userComplain.date %></td>
    <td><%= userComplain.location %>, <%= userComplain.state%></td>
    <td><% if(requestedId == null){  %>
        <a href="police_assign/<%= userComplain._id %>" class="btn btn-primary">Assign Police Officer</a>
<%    }  else{ %>
            Police Officer Assigned
<%    } %>

    </td>
    <td><%= userComplain.policeId %></td>
  <%    }  %>
  <%    });  %>
  </tr>
</tbody>

</table>
</div>



<%- include("partials/footer") -%>
